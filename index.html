<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CybrJustice | Legal Resources For Everyone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        #truth-modal-bg {
            display: none;
            position: fixed; inset: 0;
            z-index: 9999;
            background: rgba(0,0,0,0.62);
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(6px);
            animation: fadeInBg .2s;
        }
        #truth-modal {
            background: #fff;
            width: 75vw;
            max-width: 900px;
            min-width: 320px;
            max-height: 85vh;
            min-height: 220px;
            border-radius: 18px;
            box-shadow: 0 8px 48px #4448;
            padding: 28px 18px 18px 18px;
            position: relative;
            display: flex;
            flex-direction: column;
            animation: popIn .18s cubic-bezier(.4,1.4,.4,1);
            overflow-y: auto;
        }
        #truth-modal-close {
            position: absolute; top: 12px; right: 14px;
            font-size: 1.7em; color: #888; background: none;
            border: none; cursor: pointer;
        }
        #truth-modal h2 {
            margin: 0 0 16px 0;
            font-size: 1.35em;
            font-weight: 600;
            color: #222;
        }
        #truth-modal-query {
            width: 100%;
            padding: 12px 14px;
            border: 1.5px solid #ccc;
            border-radius: 7px;
            margin-bottom: 15px;
            font-size: 1.07em;
        }
        #truth-modal-search {
            padding: 8px 22px;
            border-radius: 7px;
            background: #2563eb;
            color: #fff;
            font-weight: 600;
            border: none;
            font-size: 1.07em;
            align-self: flex-end;
            margin-bottom: 12px;
        }
        #truth-modal-result {
            margin-top: 7px;
            min-height: 60px;
            font-size: 1.1em;
            color: #222;
            overflow-y: auto;
            max-height: 48vh;
        }
        @keyframes fadeInBg { from { opacity: 0; } to { opacity: 1; } }
        @keyframes popIn { from { transform: scale(0.97); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .rabbit-container { display: inline-block; cursor: pointer; transition: transform 0.18s;}
        .rabbit-container:hover { transform: scale(1.13) rotate(-6deg);}
        .footer-rabbit { font-size: 2.2em; margin-top: 4px; }
        @media (max-width: 700px) {
          #truth-modal { width: 97vw; max-width: 99vw; }
        }
    </style>
</head>
<body class="font-sans antialiased text-gray-800 bg-gray-50">
    <!-- Header -->
    <header class="bg-gradient-to-tr from-blue-900 via-blue-700 to-blue-500 text-white">
        <div class="container mx-auto px-4 py-16 md:py-24">
            <div class="max-w-3xl mx-auto text-center">
                <h1 class="text-4xl md:text-5xl font-bold mb-6">Equal Justice Shouldn't Depend on Your Bank Account</h1>
                <p class="text-xl md:text-2xl mb-8 opacity-90">Access free legal resources, documents, and education to help navigate the legal system. The cards aren't dealt equally—we're here to help level the playing field.</p>
                <div class="flex flex-wrap justify-center gap-4">
                    <a href="#resources" class="px-6 py-3 bg-white text-blue-800 font-semibold rounded-full hover:bg-blue-50 transition">Explore Resources</a>
                    <a href="#education" class="px-6 py-3 border-2 border-white text-white font-semibold rounded-full hover:bg-white hover:text-blue-800 transition">Learn Your Rights</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Resources Section -->
        <section id="resources" class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">Access Legal Resources</h2>
                    <p class="text-lg text-gray-600 max-w-2xl mx-auto">Access guides, information, and tools to help you understand your legal situation.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="bg-white rounded-xl shadow-md overflow-hidden card-hover transition duration-300">
                        <div class="p-6">
                            <div class="text-blue-600 text-4xl mb-4"><i class="fas fa-file-contract"></i></div>
                            <h3 class="text-xl font-semibold mb-2">Document Templates</h3>
                            <p class="text-gray-600 mb-4">Access free templates for common legal documents.</p>
                            <a href="https://cybrjustice.pages.dev/resources/documents" class="inline-flex items-center text-blue-600 font-medium hover:text-blue-800">
                                View Templates <i class="fas fa-arrow-right ml-2"></i>
                            </a>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md overflow-hidden card-hover transition duration-300">
                        <div class="p-6">
                            <div class="text-blue-600 text-4xl mb-4"><i class="fas fa-gavel"></i></div>
                            <h3 class="text-xl font-semibold mb-2">Court Procedures</h3>
                            <p class="text-gray-600 mb-4">Learn about court processes and what to expect.</p>
                            <a href="https://cybrjustice.pages.dev/resources/court" class="inline-flex items-center text-blue-600 font-medium hover:text-blue-800">
                                Learn More <i class="fas fa-arrow-right ml-2"></i>
                            </a>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md overflow-hidden card-hover transition duration-300">
                        <div class="p-6">
                            <div class="text-blue-600 text-4xl mb-4"><i class="fas fa-hands-helping"></i></div>
                            <h3 class="text-xl font-semibold mb-2">Legal Aid Directory</h3>
                            <p class="text-gray-600 mb-4">Find pro bono and low-cost legal services in your area.</p>
                            <a href="https://cybrjustice.pages.dev/resources/aid" class="inline-flex items-center text-blue-600 font-medium hover:text-blue-800">
                                Find Help <i class="fas fa-arrow-right ml-2"></i>
                            </a>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md overflow-hidden card-hover transition duration-300">
                        <div class="p-6">
                            <div class="text-blue-600 text-4xl mb-4"><i class="fas fa-book"></i></div>
                            <h3 class="text-xl font-semibold mb-2">Legal Dictionary</h3>
                            <p class="text-gray-600 mb-4">Understand complex legal terms in plain language.</p>
                            <a href="https://cybrjustice.pages.dev/resources/dictionary" class="inline-flex items-center text-blue-600 font-medium hover:text-blue-800">
                                Explore Terms <i class="fas fa-arrow-right ml-2"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Legal Education Section -->
        <section id="education" class="py-16 bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">Legal Education</h2>
                    <p class="text-lg text-gray-600 max-w-2xl mx-auto">Build your understanding of the legal system through free resources.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-white rounded-xl shadow-md overflow-hidden card-hover transition duration-300">
                        <div class="h-48 bg-blue-100 flex items-center justify-center">
                            <i class="fas fa-video text-6xl text-blue-600"></i>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-semibold mb-3">Video Tutorials</h3>
                            <p class="text-gray-600 mb-4">Step-by-step video guides on navigating common legal processes.</p>
                            <a href="https://cybrjustice.pages.dev/education/videos" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">
                                Watch Videos <i class="fas fa-play ml-2"></i>
                            </a>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md overflow-hidden card-hover transition duration-300">
                        <div class="h-48 bg-blue-100 flex items-center justify-center">
                            <i class="fas fa-file-pdf text-6xl text-blue-600"></i>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-semibold mb-3">Downloadable Guides</h3>
                            <p class="text-gray-600 mb-4">Comprehensive PDF guides on various legal topics you can reference offline.</p>
                            <a href="https://cybrjustice.pages.dev/education/guides" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">
                                Download Guides <i class="fas fa-download ml-2"></i>
                            </a>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md overflow-hidden card-hover transition duration-300">
                        <div class="h-48 bg-blue-100 flex items-center justify-center">
                            <i class="fas fa-chalkboard-teacher text-6xl text-blue-600"></i>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-semibold mb-3">Free Webinars</h3>
                            <p class="text-gray-600 mb-4">Join live webinars hosted by legal professionals on rotating topics.</p>
                            <a href="https://cybrjustice.pages.dev/education/webinars" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">
                                Sign Up <i class="fas fa-user-plus ml-2"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Know Your Rights Section -->
        <section class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">Know Your Rights</h2>
                    <p class="text-lg text-gray-600 max-w-2xl mx-auto">Understanding your rights is the first step to protecting them.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="p-6 border border-gray-200 rounded-lg rights-card">
                        <div class="flex items-start">
                            <div class="bg-blue-100 p-3 rounded-full mr-4"><i class="fas fa-home text-blue-600 text-xl"></i></div>
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Tenant Rights</h3>
                                <p class="text-gray-600 mb-3">Learn about safe housing, eviction protections, and deposit returns.</p>
                                <a href="https://cybrjustice.pages.dev/rights/tenant" class="text-blue-600 font-medium hover:underline">Read More</a>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 border border-gray-200 rounded-lg rights-card">
                        <div class="flex items-start">
                            <div class="bg-blue-100 p-3 rounded-full mr-4"><i class="fas fa-briefcase text-blue-600 text-xl"></i></div>
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Employment Rights</h3>
                                <p class="text-gray-600 mb-3">Understand workplace protections, minimum wage, and discrimination laws.</p>
                                <a href="https://cybrjustice.pages.dev/rights/employment" class="text-blue-600 font-medium hover:underline">Read More</a>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 border border-gray-200 rounded-lg rights-card">
                        <div class="flex items-start">
                            <div class="bg-blue-100 p-3 rounded-full mr-4"><i class="fas fa-shopping-cart text-blue-600 text-xl"></i></div>
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Consumer Rights</h3>
                                <p class="text-gray-600 mb-3">Protect yourself from predatory lending, scams, and unfair practices.</p>
                                <a href="https://cybrjustice.pages.dev/rights/consumer" class="text-blue-600 font-medium hover:underline">Read More</a>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 border border-gray-200 rounded-lg rights-card">
                        <div class="flex items-start">
                            <div class="bg-blue-100 p-3 rounded-full mr-4"><i class="fas fa-scale-balanced text-blue-600 text-xl"></i></div>
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Civil Rights</h3>
                                <p class="text-gray-600 mb-3">Freedom from discrimination based on protected characteristics.</p>
                                <a href="https://cybrjustice.pages.dev/rights/civil" class="text-blue-600 font-medium hover:underline">Read More</a>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 border border-gray-200 rounded-lg rights-card">
                        <div class="flex items-start">
                            <div class="bg-blue-100 p-3 rounded-full mr-4"><i class="fas fa-shield-alt text-blue-600 text-xl"></i></div>
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Law Enforcement Encounters</h3>
                                <p class="text-gray-600 mb-3">Know what to do and say during police interactions and arrests.</p>
                                <a href="https://cybrjustice.pages.dev/rights/police" class="text-blue-600 font-medium hover:underline">Read More</a>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 border border-gray-200 rounded-lg rights-card">
                        <div class="flex items-start">
                            <div class="bg-blue-100 p-3 rounded-full mr-4"><i class="fas fa-passport text-blue-600 text-xl"></i></div>
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Immigration Rights</h3>
                                <p class="text-gray-600 mb-3">Rights of immigrants, refugees, and non-citizens in legal matters.</p>
                                <a href="https://cybrjustice.pages.dev/rights/immigration" class="text-blue-600 font-medium hover:underline">Read More</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Call to Action -->
        <section class="py-16 bg-blue-600 text-white">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-6">Need More Help?</h2>
                <p class="text-xl mb-8 max-w-2xl mx-auto">Our mission is to make legal information accessible to everyone, regardless of income.</p>
                <div class="flex flex-wrap justify-center gap-4">
                    <a href="#" class="px-6 py-3 bg-white text-blue-800 font-semibold rounded-full hover:bg-blue-50 transition">Contact Support</a>
                    <a href="#" class="px-6 py-3 border-2 border-white text-white font-semibold rounded-full hover:bg-white hover:text-blue-800 transition">Volunteer With Us</a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">CybrJustice</h3>
                    <p class="text-gray-400">Legal resources and education for everyone.</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Resources</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Document Templates</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Court Procedures</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Legal Aid Directory</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Legal Dictionary</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Education</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Video Tutorials</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Downloadable Guides</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Free Webinars</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Connect</h4>
                    <div class="flex space-x-4 mb-4">
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-instagram"></i></a>
                    </div>
                    <p class="text-gray-400">info@cybrjustice.org</p>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2025 CybrJustice. All rights reserved.</p>
                <div class="rabbit-container" id="footer-rabbit" title="Follow the white rabbit...">
                    <span class="footer-rabbit">🐇</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Truth Engine Modal -->
    <div id="truth-modal-bg">
      <div id="truth-modal">
        <button id="truth-modal-close">&times;</button>
        <h2>CybrJustice Truth Engine</h2>
        <input type="text" id="truth-modal-query" placeholder="Ask your legal question..." />
        <button id="truth-modal-search">Search</button>
        <div id="truth-modal-result"></div>
      </div>
    </div>

    <script>
    const API_BASE = 'https://justice.ai-n.workers.dev';

    // 1. The Rabbit: redirect to truth-network.html
    document.getElementById('footer-rabbit').addEventListener('click', function(e) {
      e.stopPropagation();
      window.location.href = 'truth-network.html';
    });

    // 2. Modal open/close functions
    function openTruthModal(query='') {
      document.getElementById('truth-modal-bg').style.display = 'flex';
      const input = document.getElementById('truth-modal-query');
      input.value = query;
      document.getElementById('truth-modal-result').innerHTML = '';
      setTimeout(()=>input.focus(), 120);
      if(query) runTruthModalQuery(query);
    }
    function closeTruthModal() {
      document.getElementById('truth-modal-bg').style.display = 'none';
      document.getElementById('truth-modal-query').value = '';
      document.getElementById('truth-modal-result').innerHTML = '';
    }
    document.getElementById('truth-modal-close').onclick = closeTruthModal;
    document.getElementById('truth-modal-bg').addEventListener('click', function(e){
      if (e.target === this) closeTruthModal();
    });

    // 3. Run the query and render in modal with unique ID prefix
    async function runTruthModalQuery(queryText) {
      if (!queryText || !queryText.trim()) return;
      const resultDiv = document.getElementById('truth-modal-result');
      resultDiv.innerHTML = `<p style="text-align:center;color:#2563eb;">Searching the truth engine...</p>`;
      // Generate a unique id for this query
      const uniqueId = 'cbrj-aid-' + Date.now();
      const prefixedQuery = `[${uniqueId}] ${queryText.trim()}`;
      try {
        const resp = await fetch(`${API_BASE}/api/ai/truth`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ query: prefixedQuery })
        });
        const data = await resp.json();
        if (data.answer) {
          let html = `<div><span style="color:#2563eb;font-size:.98em;font-weight:600;">Query ID: ${uniqueId}</span><br>${marked.parse(data.answer)}</div>`;
          if (data.citations && Array.isArray(data.citations) && data.citations.length > 0) {
            html += `<div style="margin-top:12px;"><strong>Sources:</strong><ul style="margin-bottom:0;">` +
              data.citations.map(c =>
                `<li><a href="${c.url}" target="_blank" rel="noopener noreferrer">${c.title || c.url}</a></li>`
              ).join('') +
              `</ul></div>`;
          }
          resultDiv.innerHTML = html;
        } else {
          resultDiv.innerHTML = `<p style="text-align:center;color:#444;">No direct answer found for your query. Try rephrasing.</p>`;
        }
      } catch (error) {
        resultDiv.innerHTML = `<p style="text-align:center;color:#d9534f;">Error: ${error.message}<br>Could not connect to AI service.</p>`;
      }
    }

    // 4. Modal search button and Enter key
    document.getElementById('truth-modal-search').onclick = ()=>runTruthModalQuery(document.getElementById('truth-modal-query').value);
    document.getElementById('truth-modal-query').addEventListener('keydown', function(e){
      if (e.key === 'Enter') runTruthModalQuery(this.value);
    });

    // 5. Intercept all <a> clicks except the rabbit
    document.body.addEventListener('click', function(event){
      let anchor = event.target.closest('a');
      if (!anchor) return;
      // Don't override the rabbit
      if (anchor.closest('#footer-rabbit')) return;
      event.preventDefault();
      // Use text or data-query if provided
      let query = anchor.hasAttribute('data-query') ? anchor.getAttribute('data-query') : anchor.textContent.trim();
      openTruthModal(query);
    });
    </script>
</body>
</html>
